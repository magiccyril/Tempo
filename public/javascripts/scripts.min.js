!function(b){b(function(){"use strict";var c=b.support,a=(document.body||document.documentElement).style;if(a=void 0!==a.transition||void 0!==a.WebkitTransition||void 0!==a.MozTransition||void 0!==a.MsTransition||void 0!==a.OTransition)a={end:"TransitionEnd"};c.transition=a})}(window.jQuery);
!function(b){function c(a,d){var c=b.proxy(this.process,this),e=b(a).is("body")?b(window):b(a),f;this.options=b.extend({},b.fn.scrollspy.defaults,d);this.$scrollElement=e.on("scroll.scroll.data-api",c);this.selector=(this.options.target||(f=b(a).attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a";this.$body=b("body").on("click.scroll.data-api",this.selector,c);this.refresh();this.process()}"use strict";c.prototype={constructor:c,refresh:function(){this.targets=this.$body.find(this.selector).map(function(){var a=
b(this).attr("href");return/^#\w/.test(a)&&b(a).length?a:null});this.offsets=b.map(this.targets,function(a){return b(a).position().top})},process:function(){var a=this.$scrollElement.scrollTop()+this.options.offset,d=this.offsets,b=this.targets,c=this.activeTarget,f;for(f=d.length;f--;)c!=b[f]&&a>=d[f]&&(!d[f+1]||a<=d[f+1])&&this.activate(b[f])},activate:function(a){var d;this.activeTarget=a;this.$body.find(this.selector).parent(".active").removeClass("active");d=this.$body.find(this.selector+'[href="'+
a+'"]').parent("li").addClass("active");d.parent(".dropdown-menu")&&d.closest("li.dropdown").addClass("active")}};b.fn.scrollspy=function(a){return this.each(function(){var d=b(this),g=d.data("scrollspy"),e="object"==typeof a&&a;g||d.data("scrollspy",g=new c(this,e));"string"==typeof a&&g[a]()})};b.fn.scrollspy.Constructor=c;b.fn.scrollspy.defaults={offset:10};b(function(){b('[data-spy="scroll"]').each(function(){var a=b(this);a.scrollspy(a.data())})})}(window.jQuery);
!function(b){var c=function(a,d){this.init("tooltip",a,d)};c.prototype={constructor:c,init:function(a,d,c){var e,f;this.type=a;this.$element=b(d);this.options=this.getOptions(c);this.enabled=!0;"manual"!=this.options.trigger&&(e="hover"==this.options.trigger?"mouseenter":"focus",f="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(e,this.options.selector,b.proxy(this.enter,this)),this.$element.on(f,this.options.selector,b.proxy(this.leave,this)));this.options.selector?this._options=
b.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(a){return a=b.extend({},b.fn[this.type].defaults,a,this.$element.data()),a.delay&&"number"==typeof a.delay&&(a.delay={show:a.delay,hide:a.delay}),a},enter:function(a){var d=b(a.currentTarget)[this.type](this._options).data(this.type);!d.options.delay||!d.options.delay.show?d.show():(d.hoverState="in",setTimeout(function(){"in"==d.hoverState&&d.show()},d.options.delay.show))},leave:function(a){var d=b(a.currentTarget)[this.type](this._options).data(this.type);
!d.options.delay||!d.options.delay.hide?d.hide():(d.hoverState="out",setTimeout(function(){"out"==d.hoverState&&d.hide()},d.options.delay.hide))},show:function(){var a,d,b,c,f,h,l;if(this.hasContent()&&this.enabled){a=this.tip();this.setContent();this.options.animation&&a.addClass("fade");h="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement;d=/in/.test(h);a.remove().css({top:0,left:0,display:"block"}).appendTo(d?this.$element:document.body);
b=this.getPosition(d);c=a[0].offsetWidth;f=a[0].offsetHeight;switch(d?h.split(" ")[1]:h){case "bottom":l={top:b.top+b.height,left:b.left+b.width/2-c/2};break;case "top":l={top:b.top-f,left:b.left+b.width/2-c/2};break;case "left":l={top:b.top+b.height/2-f/2,left:b.left-c};break;case "right":l={top:b.top+b.height/2-f/2,left:b.left+b.width}}a.css(l).addClass(h).addClass("in")}},setContent:function(){var a=this.tip();a.find(".tooltip-inner").html(this.getTitle());a.removeClass("fade in top bottom left right")},
hide:function(){function a(){var a=setTimeout(function(){d.off(b.support.transition.end).remove()},500);d.one(b.support.transition.end,function(){clearTimeout(a);d.remove()})}var d=this.tip();d.removeClass("in");b.support.transition&&this.$tip.hasClass("fade")?a():d.remove()},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},
getPosition:function(a){return b.extend({},a?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title),a=a.toString().replace(/(^\s*|\s*$)/,""),a},tip:function(){return this.$tip=this.$tip||b(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=
null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}};b.fn.tooltip=function(a){return this.each(function(){var d=b(this),g=d.data("tooltip"),e="object"==typeof a&&a;g||d.data("tooltip",g=new c(this,e));"string"==typeof a&&g[a]()})};b.fn.tooltip.Constructor=c;b.fn.tooltip.defaults={animation:!0,delay:0,selector:!1,placement:"top",trigger:"hover",
title:"",template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}}(window.jQuery);var months="Janvier,F\u00e9vrier,Mars,Avril,Mai,Juin,Juillet,Aout,Septembre,Octobre,Novembre,D\u00e9cembre".split(","),days="Lundi,Mardi,Mercredi,Jeudi,Vendredi,Samedi,Dimanche".split(","),now={date:new Date,day:(new Date).getDate(),month:(new Date).getMonth()+1,year:(new Date).getFullYear()};now.toString=months[now.month-1]+" "+now.year;var max={month:now.month,year:now.year},min={month:9,year:2005};
function getPrevMonth(b,c){var b=parseInt(b,10),a=b-1,d=c;0>a-1&&(a=12,d=c-1);return{month:a,year:d,toString:months[a-1]+" "+d}}function getNextMonth(b,c){var b=parseInt(b,10),a=b+1,d=c;a-1>months.length-1&&(a=1,d+=1);return{month:a,year:d,toString:months[a-1]+" "+d}}function getPrevYear(b,c){var a=b=parseInt(b,10),d=c-1;return{month:a,year:d,toString:months[a-1]+" "+d}}function getNextYear(b,c){var a=b=parseInt(b,10),d=c+1;return{month:a,year:d,toString:months[a-1]+" "+d}}var history_structure;
function createHistoryStructure(b){var c=$("<header />");c.attr({id:"history-header"}).appendTo(b);var a=$("<h3/>");a.appendTo(c).html(months[now.month-1]+" "+now.year);var d=getPrevYear(now.month,now.year),g=createHistoryButton(d,c,"btn-fast-prev","pull-left infotip");g.bind("click",onHistoryButtonClick).bind("changeValues",onPrevButtonChange).trigger("changeValues",d);g.data("icon").addClass("icon-fast-backward");var e=getPrevMonth(now.month,now.year),d=createHistoryButton(e,c,"btn-prev","pull-left");
d.bind("click",onHistoryButtonClick).bind("changeValues",onPrevButtonChange).trigger("changeValues",e);d.data("icon").addClass("icon-step-backward");var f=getNextYear(now.month,now.year),e=createHistoryButton(f,c,"btn-fast-next","pull-right infotip",!1);e.bind("click",onHistoryButtonClick).bind("changeValues",onNextButtonChange).trigger("changeValues",f).hide();e.data("icon").addClass("icon-fast-forward");var h=getNextMonth(now.month,now.year),f=createHistoryButton(h,c,"btn-next","pull-right",!1);
f.bind("click",onHistoryButtonClick).bind("changeValues",onNextButtonChange).trigger("changeValues",h).hide();f.data("icon").addClass("icon-step-forward");h=createHistoryButton(now,c,"btn-today","center infotip");h.bind("click",onHistoryButtonClick).attr("data-infotip",now.toString).hide();h.data("text").html("Aujourd'hui");h.data("icon").addClass("icon-share-alt");var l=$("<table />");l.addClass("table table-bordered").appendTo(b);$("<tbody />").appendTo(l);var k="";for(i in days)var m=days[i],k=
k+"<th>",k=k+('<abbr title="'+m+'">'),k=k+(m.substr(0,3)+"."),k=k+"</abbr>",k=k+"</th>";k="<thead><tr>"+k+"</tr></thead>";l.prepend($(k));return{alert:b.find(".alert"),fast_prev_btn:g,fast_next_btn:e,header:c,header_title:a,next_btn:f,prev_btn:d,table:l,table_header:k,today_btn:h}}
function createHistoryButton(b,c,a,d,g){"undefined"==typeof a&&(a="");"undefined"==typeof d&&(d="");"undefined"==typeof g&&(g=!0);var e=$("<a />"),f=$("<i />"),h=$("<span />");e.addClass("btn "+d).attr({"data-month":b.month,"data-year":b.year,id:a});g?e.append(f).append(h):e.append(h).append(f);e.data({icon:f,text:h}).appendTo(c);return e}
function onHistoryButtonClick(b){b.preventDefault();b.stopPropagation();var b=$(this),c=parseInt(b.attr("data-month"),10),a=parseInt(b.attr("data-year"),10);b.tooltip("hide");get_history(a,c,function(){a==now.year&&c==now.month?history_structure.today_btn.fadeOut("fast"):history_structure.today_btn.fadeIn("fast");history_structure.header_title.html(months[c-1]+" "+a);var b=getPrevMonth(c,a);history_structure.prev_btn.trigger("changeValues",b);b=getNextMonth(c,a);history_structure.next_btn.trigger("changeValues",
b);b=getPrevYear(c,a);history_structure.fast_prev_btn.trigger("changeValues",b);b=getNextYear(c,a);history_structure.fast_next_btn.trigger("changeValues",b)})}function onPrevButtonChange(b,c){var a=$(this);a.attr({"data-month":c.month,"data-year":c.year,"data-infotip":c.toString});a.data("text").html(c.toString);c.year<min.year?a.fadeOut("fast"):c.year<=min.year&&c.month<min.month?a.fadeOut("fast"):a.fadeIn("fast")}
function onNextButtonChange(b,c){var a=$(this);a.attr({"data-month":c.month,"data-year":c.year,"data-infotip":c.toString}).data("text").html(c.toString);c.year>max.year?a.fadeOut("fast"):c.year>=max.year&&c.month>max.month?a.fadeOut("fast"):a.fadeIn("fast")}
function display_history(b){history_structure.table.empty();for(i in b){var c=b[i],a=$("<tr>");for(j in c){var d=c[j],g=$("<td>");if(d){var e="",e=e+('<span class="day">'+d.day+"</span>"),e=e+'<span class="color">',e=d.color?e+(" "+d.t_color):e+" -",e=e+"</span>";d.color?g.addClass(d.color):g.addClass("no");d.year==now.year&&d.month==now.month&&d.day==now.day&&g.addClass("today");g.html(e);d.year==now.year&&d.month==now.month&&d.day==now.day&&g.wrapInner("<mark />")}else g.addClass("out");g.appendTo(a)}a.appendTo(history_structure.table)}}
function get_history(b,c,a){b=parseInt(b,10);c=parseInt(c,10);10>c&&(c="0"+c);$.ajax("/webservice.json?year="+b+"&month="+c+"&formatted=true",{error:function(a,b,c){history_structure.alert.html(""+b+": "+c);history_structure.alert.slideDown()},success:function(b){history_structure.alert.slideUp();display_history(b);a&&a()}})}
function onPageAnchorClick(b){b.preventDefault();var c=$(this);$("html, body").stop().animate({scrollTop:$(c.attr("href")).offset().top},1E3,function(){window.location.hash=c.attr("href")})}function onScrollFixNav(){function b(){var b=c.scrollTop();b>=d&&!g?(g=1,a.addClass("mainnav-fixed")):b<=d&&g&&(g=0,a.removeClass("mainnav-fixed"))}var c=$(window),a=$(".mainnav"),d=$(".mainnav").length&&$(".mainnav").offset().top-40,g=0;b();c.on("scroll",b)}
$(document).ready(function(){onScrollFixNav();$("body").tooltip({selector:".infotip",title:function(){return $(this).attr("data-infotip")}});$('a[href^="#"]').bind("click",onPageAnchorClick);var b=$("#history");history_structure=createHistoryStructure(b);history_structure.alert.hide();get_history(now.year,now.month)});